import{u as g,a as v,r as n,j as e}from"./index-df1SZI71.js";import{a9 as w}from"./api-x0wxRGLh.js";/* empty css                      */const S={1:"الاثنين",2:"الثلاثاء",3:"الأربعاء",4:"الخميس",5:"الجمعة"},p=["#2C7BE5","#00C853","#FFB300","#D32F2F","#8B5CF6","#F97316","#14B8A6","#EC4899"];function k(){const h=g(),{token:o}=v(),[u,l]=n.useState(!0),[i,d]=n.useState(""),[a,b]=n.useState({className:"",entries:[],schoolDays:[1,2,3,4,5]});n.useEffect(()=>{let s=!0;return(async()=>{try{l(!0),d("");const t=await w(o);if(!s)return;b({className:t.className||"",entries:t.entries||[],schoolDays:t.schoolDays||[1,2,3,4,5]})}catch(t){s&&d((t==null?void 0:t.message)||"تعذّر تحميل الجدول الأسبوعي.")}finally{s&&l(!1)}})(),()=>{s=!1}},[o]);const j=n.useMemo(()=>[...new Set((a.entries||[]).map(r=>`${r.startTime}-${r.endTime}`))].sort((r,t)=>String(r).localeCompare(String(t))),[a.entries]),N=n.useMemo(()=>{const s={};return(a.entries||[]).forEach(r=>{s[`${r.dayOfWeek}-${r.startTime}-${r.endTime}`]=r}),s},[a.entries]),f=n.useMemo(()=>{const s={};let r=0;return(a.entries||[]).forEach(t=>{t.subject&&!s[t.subject]&&(s[t.subject]=p[r%p.length],r++)}),s},[a.entries]);return e.jsx("main",{dir:"rtl",className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-6 py-8",children:[e.jsxs("header",{className:"flex items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h2-premium",children:"الجدول الأسبوعي"}),e.jsx("p",{className:"caption-premium mt-1",children:a.className?`الصف ${a.className}`:"البوابة الأكاديمية"})]}),e.jsx("button",{type:"button",onClick:()=>h("/student"),className:"action-btn focus-ring pressable",children:"← العودة للبوابة"})]}),i&&e.jsx("div",{className:"mb-6 rounded-sm border border-danger/30 bg-red-50 px-4 py-3 text-[13px] text-danger",children:i}),u?e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(s=>e.jsx("div",{className:"skeleton h-16"},s))}):a.entries.length?e.jsx("div",{className:"surface-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[600px] border-collapse text-right",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-[11px] font-semibold text-text-secondary uppercase tracking-wide w-28",children:"الوقت"}),a.schoolDays.map(s=>e.jsx("th",{className:"px-4 py-3 text-[13px] font-semibold text-text-primary",children:S[s]||s},s))]})}),e.jsx("tbody",{children:j.map((s,r)=>{const[t,m]=s.split("-");return e.jsxs("tr",{className:`border-b border-border last:border-0 ${r%2===0?"":"bg-slate-50/50"}`,children:[e.jsxs("td",{className:"px-4 py-3 text-[12px] font-semibold text-text-secondary whitespace-nowrap",children:[t," – ",m]}),a.schoolDays.map(x=>{const c=N[`${x}-${t}-${m}`],y=c?f[c.subject]||"#2C7BE5":null;return e.jsx("td",{className:"px-2 py-2",children:c?e.jsxs("div",{className:"rounded-sm border border-border bg-surface p-2.5 premium-transition hover:shadow-sm",style:{borderRightWidth:3,borderRightColor:y},children:[e.jsx("p",{className:"text-[13px] font-semibold text-text-primary leading-snug",children:c.subject}),c.teacherName&&e.jsx("p",{className:"text-[11px] text-text-secondary mt-0.5",children:c.teacherName}),c.room&&e.jsx("p",{className:"text-[11px] text-text-secondary",children:c.room})]}):e.jsx("div",{className:"rounded-sm bg-slate-50 border border-border h-[58px]"})},`${x}-${s}`)})]},s)})})]})})}):e.jsxs("div",{className:"surface-card p-16 text-center",children:[e.jsx("p",{className:"h3-premium mb-2",children:"لم يتم تحديد الجدول بعد"}),e.jsx("p",{className:"caption-premium",children:"سيظهر الجدول هنا عند إعداده من قِبل المدرسة."})]})]})})}export{k as default};
