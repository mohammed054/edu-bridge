import{r as a,j as e,u as N,a as v,b as w}from"./index-df1SZI71.js";const A="/edu-bridge/assets/login-background-Cyj1D8FX.png",k="/edu-bridge/assets/login-floating-CqAylRPF.png",f=(c,d,t)=>Math.min(Math.max(c,d),t);function S({backgroundSrc:c,floatingSrc:d}){const[t,n]=a.useState({x:0,y:0}),m=a.useMemo(()=>({transform:`translate3d(${t.x*-8}px, ${t.y*-8}px, 0) scale(1.02)`,transition:"transform 180ms ease-out"}),[t.x,t.y]),l=a.useMemo(()=>({transform:`translate3d(${t.x*12}px, ${t.y*12}px, 0) scale(1.03)`,transition:"transform 160ms ease-out"}),[t.x,t.y]),b=o=>{const i=o.currentTarget.getBoundingClientRect(),u=((o.clientX-i.left)/i.width-.5)*2,x=((o.clientY-i.top)/i.height-.5)*2;n({x:f(u,-.8,.8),y:f(x,-.8,.8)})};return e.jsxs("div",{onMouseMove:b,onMouseLeave:()=>n({x:0,y:0}),className:"absolute inset-0 overflow-hidden",children:[e.jsx("img",{src:c,alt:"","aria-hidden":"true",style:m,className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("img",{src:d,alt:"","aria-hidden":"true",style:l,className:"absolute inset-0 h-full w-full object-cover"})]})}const E=[{key:"student",label:"Student"},{key:"teacher",label:"Teacher"},{key:"admin",label:"Admin"}];function B(){const c=N(),{login:d,isLoading:t}=v(),[n,m]=a.useState("student"),[l,b]=a.useState(""),[o,i]=a.useState(""),[u,x]=a.useState(""),[p,h]=a.useState(!1),y=a.useMemo(()=>t||p||!l.trim()||!o.trim(),[t,p,l,o]),j=async s=>{var g;s.preventDefault(),x(""),h(!0);try{const r=await d({identifier:l,password:o,portal:n});c(w((g=r==null?void 0:r.user)==null?void 0:g.role),{replace:!0})}catch(r){x((r==null?void 0:r.message)||"تعذر تسجيل الدخول.")}finally{h(!1)}};return e.jsx("main",{dir:"rtl",className:"min-h-screen bg-white [font-family:'IBM_Plex_Arabic',_'Segoe_UI',sans-serif]",style:{fontFamily:"'IBM Plex Arabic', 'Segoe UI', sans-serif"},children:e.jsxs("div",{className:"grid min-h-screen grid-cols-1 lg:grid-cols-[520px_1fr]",children:[e.jsx("section",{className:"relative flex items-center justify-center bg-white px-8 py-10 sm:px-12",children:e.jsxs("div",{className:"w-full max-w-[360px]",children:[e.jsx("h1",{className:"mb-2 text-[34px] font-semibold leading-[1.3] text-[#111]",style:{fontFamily:"'Noto Naskh Arabic', 'Amiri', serif"},children:"تسجيل الدخول"}),e.jsx("p",{className:"mb-8 text-[13px] text-[#777]",children:"بوابة Hikmah School الرسمية"}),e.jsx("div",{className:"mb-6 grid grid-cols-3 gap-1 rounded-[6px] border border-[#E5E7EB] bg-[#FAFAFA] p-1",children:E.map(s=>e.jsx("button",{type:"button",onClick:()=>m(s.key),className:`h-9 rounded-[4px] text-[12px] font-medium transition-colors duration-150 ${n===s.key?"bg-white text-[#111] shadow-sm":"text-[#666] hover:bg-white"}`,children:s.label},s.key))}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[#555]",children:n==="admin"?"اسم المستخدم":"البريد الإلكتروني"}),e.jsx("input",{type:"text",value:l,onChange:s=>b(s.target.value),autoComplete:"username",dir:"ltr",className:"h-11 w-full rounded-[4px] border border-[#E5E7EB] px-3 text-[14px] text-[#111] outline-none transition-colors duration-150 focus:border-[#1A3A6B]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[#555]",children:"كلمة المرور"}),e.jsx("input",{type:"password",value:o,onChange:s=>i(s.target.value),autoComplete:"current-password",dir:"ltr",className:"h-11 w-full rounded-[4px] border border-[#E5E7EB] px-3 text-[14px] text-[#111] outline-none transition-colors duration-150 focus:border-[#1A3A6B]"})]}),u?e.jsx("p",{className:"rounded-[4px] border border-[#F3D4D2] bg-[#FDECEA] px-3 py-2 text-[12px] text-[#8B1A1A]",children:u}):null,e.jsx("button",{type:"submit",disabled:y,className:"h-11 w-full rounded-[4px] border border-[#1A3A6B] bg-[#1A3A6B] text-[14px] font-medium text-white transition duration-150 hover:bg-[#0D2449] active:scale-[0.98] disabled:cursor-not-allowed disabled:opacity-50",children:p?"جارٍ تسجيل الدخول...":"تسجيل الدخول"})]})]})}),e.jsx("section",{className:"relative hidden overflow-hidden bg-[#F7F7F5] lg:block",children:e.jsx("div",{className:"absolute inset-8 overflow-hidden rounded-[6px] border border-[#E5E7EB] bg-white",children:e.jsx(S,{backgroundSrc:A,floatingSrc:k})})})]})})}export{B as default};
