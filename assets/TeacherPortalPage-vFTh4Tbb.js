import{j as e,r as i,u as Rt,a as Et}from"./index-df1SZI71.js";import{R as Lt,S as $t,T as Pt,U as Gt,V as Ot,W as Ut,X as Wt,Y as Bt,Z as Ht,_ as _t,$ as Vt,a0 as zt,a1 as Xt,a2 as Zt,a3 as qt,a4 as Qt}from"./api-x0wxRGLh.js";import{M as z}from"./teacherPortal-BoVOU_PB.js";const Yt=r=>/\?{2,}/.test(String(r||"")),T=(r,l="Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.")=>r&&r instanceof Lt?r.message&&!Yt(r.message)?r.message:r.status===401?"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.":r.status===403?"Ù„ÙŠØ³Øª Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„.":r.status===400?"Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©.":l:l;function G({message:r="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹",action:l}){return e.jsxs("div",{className:"ht-soft-surface flex min-h-[220px] flex-col items-center justify-center px-6 py-10 text-center",children:[e.jsx("div",{className:"mb-4 h-10 w-10 rounded-full border border-[var(--ht-border-default)] bg-[var(--ht-bg-base)]"}),e.jsx("p",{className:"text-[16px] leading-[1.8] text-[var(--ht-neutral-700)]",children:r}),l?e.jsx("div",{className:"mt-5",children:l}):null]})}const Jt=new Intl.DateTimeFormat("en-GB-u-nu-latn",{day:"2-digit",month:"2-digit",year:"numeric"}),Kt=new Intl.DateTimeFormat("en-GB-u-nu-latn",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),ea=r=>{if(!r)return"-";const l=r instanceof Date?r:new Date(r);return Number.isNaN(l.getTime())?"-":Jt.format(l)},H=r=>{if(!r)return"-";const l=r instanceof Date?r:new Date(r);return Number.isNaN(l.getTime())?"-":Kt.format(l)},p=(r,l=0)=>{const n=Number(r);return Number.isFinite(n)?new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:l}).format(n):"0"},Xe=(r={})=>{const l=r.profilePicture||r.avatarUrl||r.name||r.email||r.id||"user";return`https://api.dicebear.com/8.x/initials/svg?seed=${encodeURIComponent(l)}`},ta={ÙˆØ§Ø¬Ø¨:"bg-[var(--ht-amber-100)] text-[var(--ht-amber-600)]",Ø¥Ø¹Ù„Ø§Ù†:"bg-[var(--ht-primary-100)] text-[var(--ht-primary-700)]",ØªÙ‚ÙŠÙŠÙ…:"bg-[var(--ht-success-100)] text-[var(--ht-success-600)]"};function aa({items:r=[],onViewAll:l}){return e.jsxs("section",{className:"ht-surface p-5 sm:p-6",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø£Ø­Ø¯Ø« Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª"}),e.jsx("button",{type:"button",onClick:l,className:"ht-interactive text-[13px] font-medium text-[var(--ht-primary-700)] hover:text-[var(--ht-primary-800)] active:scale-[0.98] focus-visible:outline-none",children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„"})]}),r.length?e.jsx("div",{className:"divide-y divide-[var(--ht-border-subtle)]",children:r.map(n=>e.jsxs("article",{className:"flex flex-wrap items-start justify-between gap-3 py-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${ta[n.type]||"bg-[var(--ht-bg-muted)] text-[var(--ht-neutral-600)]"}`,children:n.type}),e.jsx("span",{className:"text-[12px] text-[var(--ht-neutral-500)]",children:n.className})]}),e.jsx("h3",{className:"text-[15px] font-medium text-[var(--ht-neutral-800)]",children:n.title})]}),e.jsx("span",{className:"whitespace-nowrap text-[12px] text-[var(--ht-neutral-400)]",children:H(n.date)})]},n.id))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})}function sa({className:r,studentCount:l,onClick:n}){return e.jsxs("button",{type:"button",onClick:n,className:"ht-surface ht-interactive ht-lift-hover flex min-h-[168px] w-full flex-col justify-center rounded-[6px] border border-[var(--ht-border-subtle)] px-5 py-6 text-right active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:[e.jsx("span",{className:"mb-3 h-[2px] w-10 bg-[var(--ht-primary-500)]/50"}),e.jsx("h3",{className:"text-center text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:r}),e.jsxs("p",{className:"mt-3 text-center text-[13px] text-[var(--ht-neutral-500)]",children:["Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨: ",p(l)]}),e.jsx("div",{className:"mt-4 border-t border-[var(--ht-border-subtle)]"})]})}function ra({rows:r=[],onAdd:l,onImport:n,onEdit:m}){return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n?e.jsx("button",{type:"button",onClick:n,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"+ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"}):null,e.jsx("button",{type:"button",onClick:l,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"+ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø§Øª"})]})]}),r.length?e.jsx("div",{className:"ht-surface ht-scroll overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse text-right",children:[e.jsx("thead",{className:"bg-[var(--ht-bg-subtle)]",children:e.jsx("tr",{children:["Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨","Ø§Ù„ØªÙ‚ÙŠÙŠÙ…","Ø§Ù„Ø¯Ø±Ø¬Ø©","Ù…Ù†","Ø§Ù„ØªØ§Ø±ÙŠØ®","ØªØ¹Ø¯ÙŠÙ„"].map(c=>e.jsx("th",{scope:"col",className:"whitespace-nowrap px-4 py-3 text-[11px] font-semibold uppercase tracking-[0.06em] text-[var(--ht-neutral-500)]",children:c},c))})}),e.jsx("tbody",{children:r.map(c=>e.jsxs("tr",{className:"border-t border-[var(--ht-border-subtle)]",children:[e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-800)]",children:c.studentName}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-700)]",children:c.examTitle||"-"}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-700)]",children:c.score===null||c.score===void 0?"-":p(c.score,2)}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-700)]",children:c.maxMarks===null||c.maxMarks===void 0?"-":p(c.maxMarks,2)}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[13px] text-[var(--ht-neutral-500)]",children:H(c.updatedAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{type:"button",onClick:()=>m(c),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none",children:"ØªØ¹Ø¯ÙŠÙ„"})})]},c.studentId))})]})}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})}const Ze={pending:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",submitted:"Ù…Ø³Ù„Ù‘Ù…",graded:"Ù…ÙƒØªÙ…Ù„"};function na({items:r=[],onCreate:l,onEdit:n,onDelete:m,onOpenDetail:c}){return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª"}),e.jsx("button",{type:"button",onClick:l,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"+ Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨"})]}),r.length?e.jsx("div",{className:"space-y-3",children:r.map(x=>{const v=x.assignments.filter(y=>y.status==="pending").length,f=x.assignments.filter(y=>y.status==="submitted").length,j=x.assignments.filter(y=>y.status==="graded").length,d=x.assignments.length;return e.jsxs("article",{className:"ht-surface p-4",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsx("h4",{className:"text-[16px] font-semibold text-[var(--ht-neutral-900)]",children:x.title}),e.jsxs("span",{className:"text-[12px] text-[var(--ht-neutral-400)]",children:["Ø§Ù„ØªØ³Ù„ÙŠÙ…: ",H(x.dueDate)]})]}),e.jsx("p",{className:"text-[14px] leading-[1.9] text-[var(--ht-neutral-700)]",children:x.description||"-"}),x.attachmentName?e.jsxs("p",{className:"mt-3 text-[13px] text-[var(--ht-neutral-500)]",children:["Ø§Ù„Ù…Ø±ÙÙ‚: ",x.attachmentName]}):null,e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-[12px] text-[var(--ht-neutral-500)]",children:[e.jsxs("span",{children:["Ø¹Ø¯Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…Ø§Øª: ",p(d)]}),e.jsxs("span",{children:["Ù…Ø³Ù„Ù‘Ù…: ",p(f)]}),e.jsxs("span",{children:["Ù…ÙƒØªÙ…Ù„: ",p(j)]}),e.jsxs("span",{children:["Ù…Ø¹Ù„Ù‘Ù‚: ",p(v)]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c(x),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none",children:"ÙØªØ­ Ø§Ù„ØªÙØ§ØµÙŠÙ„"}),e.jsx("button",{type:"button",onClick:()=>n(x),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none",children:"ØªØ¹Ø¯ÙŠÙ„"}),e.jsx("button",{type:"button",onClick:()=>m(x),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-danger-600)] hover:bg-[var(--ht-danger-100)] active:scale-[0.98] focus-visible:outline-none",children:"Ø­Ø°Ù"})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Object.keys(Ze).map(y=>{const N=x.assignments.filter(g=>g.status===y).length;return e.jsxs("span",{className:"rounded-full border border-[var(--ht-border-subtle)] bg-[var(--ht-bg-subtle)] px-2 py-1 text-[11px] text-[var(--ht-neutral-600)]",children:[Ze[y],": ",p(N)]},y)})})]},x.id)})}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})}function la({posts:r=[],onCreate:l,onEdit:n,onDelete:m}){return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª"}),e.jsx("button",{type:"button",onClick:l,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"+ Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†"})]}),r.length?e.jsx("div",{className:"space-y-3",children:r.map(c=>e.jsxs("article",{className:"ht-surface p-4",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsx("h4",{className:"text-[16px] font-semibold text-[var(--ht-neutral-900)]",children:c.title}),e.jsx("span",{className:"text-[12px] text-[var(--ht-neutral-400)]",children:H(c.createdAt)})]}),e.jsx("p",{className:"text-[14px] leading-[1.9] text-[var(--ht-neutral-700)]",children:c.body||"-"}),c.attachmentName?e.jsxs("p",{className:"mt-3 text-[13px] text-[var(--ht-neutral-500)]",children:["Ø§Ù„Ù…Ø±ÙÙ‚: ",c.attachmentName]}):null,e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(c),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none",children:"ØªØ¹Ø¯ÙŠÙ„"}),e.jsx("button",{type:"button",onClick:()=>m(c),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-danger-600)] hover:bg-[var(--ht-danger-100)] active:scale-[0.98] focus-visible:outline-none",children:"Ø­Ø°Ù"})]})]},c.id))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})}function he({label:r,value:l}){return e.jsxs("div",{className:"ht-soft-surface px-4 py-3",children:[e.jsx("p",{className:"text-[12px] text-[var(--ht-neutral-500)]",children:r}),e.jsx("p",{className:"mt-1 text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:l})]})}const oa={pending:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",submitted:"Ù…Ø³Ù„Ù‘Ù…",graded:"Ù…ÙƒØªÙ…Ù„"};function ia({summary:r,recentSubmissions:l=[]}){return e.jsxs("aside",{className:"space-y-4",children:[e.jsxs("section",{className:"ht-surface p-4",children:[e.jsx("h3",{className:"mb-4 text-[18px] font-semibold text-[var(--ht-neutral-900)]",children:"Ù…Ù„Ø®Øµ Ø§Ù„ÙØµÙ„"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(he,{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨",value:p(r.studentCount)}),e.jsx(he,{label:"Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª",value:p(r.homeworkCount)}),e.jsx(he,{label:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø§Øª",value:`${p(r.averageGrade,1)}%`}),e.jsx(he,{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª",value:p(r.announcementCount)})]})]}),e.jsxs("section",{className:"ht-surface p-4",children:[e.jsx("h3",{className:"mb-4 text-[18px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø¢Ø®Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…Ø§Øª"}),l.length?e.jsx("div",{className:"space-y-3",children:l.map(n=>e.jsxs("article",{className:"rounded-[4px] border border-[var(--ht-border-subtle)] p-3",children:[e.jsx("p",{className:"text-[13px] font-medium text-[var(--ht-neutral-800)]",children:n.studentName}),e.jsx("p",{className:"mt-1 text-[12px] text-[var(--ht-neutral-600)]",children:n.homeworkTitle}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsx("span",{className:"rounded-full bg-[var(--ht-bg-subtle)] px-2 py-1 text-[11px] text-[var(--ht-neutral-600)]",children:oa[n.status]||n.status}),e.jsx("span",{className:"text-[11px] text-[var(--ht-neutral-400)]",children:H(n.updatedAt)})]})]},n.id))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})}function ca({rows:r=[],onViewProfile:l}){return e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[20px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø§Ù„Ø·Ù„Ø§Ø¨"}),r.length?e.jsx("div",{className:"ht-surface ht-scroll overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse text-right",children:[e.jsx("thead",{className:"bg-[var(--ht-bg-subtle)]",children:e.jsx("tr",{children:["Ø§Ù„ØµÙˆØ±Ø©","Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„","Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ","Ø§Ù„Ø­Ø§Ù„Ø©","Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù"].map(n=>e.jsx("th",{scope:"col",className:"whitespace-nowrap px-4 py-3 text-[11px] font-semibold uppercase tracking-[0.06em] text-[var(--ht-neutral-500)]",children:n},n))})}),e.jsx("tbody",{children:r.map(n=>e.jsxs("tr",{className:"border-t border-[var(--ht-border-subtle)]",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("img",{src:n.avatarUrl,alt:`ØµÙˆØ±Ø© ${n.name}`,className:"h-9 w-9 rounded-full border border-[var(--ht-border-default)] object-cover"})}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-800)]",children:n.name}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-[14px] text-[var(--ht-neutral-600)]",children:n.email||"-"}),e.jsx("td",{className:"whitespace-nowrap px-4 py-3",children:e.jsx("span",{className:"rounded-full border border-[var(--ht-border-subtle)] bg-[var(--ht-bg-subtle)] px-2 py-1 text-[11px] text-[var(--ht-neutral-600)]",children:n.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{type:"button",onClick:()=>l(n),className:"ht-interactive rounded-[4px] border border-[var(--ht-border-default)] px-3 py-1.5 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù"})})]},n.id))})]})}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})}function da({tabs:r,activeKey:l,onChange:n}){const m=i.useRef(null),c=i.useRef({}),[x,v]=i.useState({width:0,x:0}),f=i.useMemo(()=>r.findIndex(j=>j.key===l),[r,l]);return i.useEffect(()=>{const j=m.current,d=c.current[l];if(!j||!d){v({width:0,x:0});return}const y=j.getBoundingClientRect(),N=d.getBoundingClientRect();v({width:N.width,x:N.left-y.left})},[l,r]),e.jsxs("div",{className:"relative border-b border-[var(--ht-border-subtle)]",ref:m,children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(j=>e.jsx("button",{ref:d=>{c.current[j.key]=d},type:"button",onClick:()=>n(j.key),className:`ht-interactive relative px-4 py-3 text-[14px] font-medium ${l===j.key?"text-[var(--ht-neutral-900)]":"text-[var(--ht-neutral-500)]"} hover:text-[var(--ht-neutral-800)] active:scale-[0.98] focus-visible:outline-none`,children:j.label},j.key))}),e.jsx("span",{className:"ht-tab-indicator absolute bottom-[-1px] block h-[2px] bg-[var(--ht-primary-500)]",style:{width:`${x.width}px`,transform:`translateX(${x.x}px)`,opacity:f>=0?1:0}})]})}const xa=[{key:"posts",label:"Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª"},{key:"homework",label:"Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª"},{key:"grades",label:"Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"},{key:"students",label:"Ø§Ù„Ø·Ù„Ø§Ø¨"}];function ua({className:r,studentCount:l,activeTab:n,onChangeTab:m,posts:c,homework:x,grades:v,students:f,summary:j,recentSubmissions:d,onCreatePost:y,onEditPost:N,onDeletePost:g,onCreateHomework:pe,onEditHomework:X,onDeleteHomework:be,onOpenHomeworkDetail:Z,onAddGrade:ve,onImportGrade:k,onEditGrade:fe,onViewStudent:E}){return e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"ht-display text-[34px] font-semibold leading-[1.3] text-[var(--ht-neutral-900)]",children:r}),e.jsxs("p",{className:"mt-1 text-[14px] text-[var(--ht-neutral-500)]",children:["Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨: ",l]})]}),e.jsx("div",{className:"border-t border-[var(--ht-border-subtle)]"}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,7fr)_minmax(0,3fr)]",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsx(da,{tabs:xa,activeKey:n,onChange:m}),n==="posts"?e.jsx(la,{posts:c,onCreate:y,onEdit:N,onDelete:g}):null,n==="homework"?e.jsx(na,{items:x,onCreate:pe,onEdit:X,onDelete:be,onOpenDetail:Z}):null,n==="grades"?e.jsx(ra,{rows:v,onAdd:ve,onImport:k,onEdit:fe}):null,n==="students"?e.jsx(ca,{rows:f,onViewProfile:E}):null]}),e.jsx(ia,{summary:j,recentSubmissions:d})]})]})}function ha({onPost:r,onHomework:l,onGrade:n,onGradeImport:m,disabled:c=!1}){const x="ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] disabled:cursor-not-allowed disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2";return e.jsxs("section",{className:"ht-surface p-5 sm:p-6",children:[e.jsx("h2",{className:"mb-5 text-[24px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{type:"button",onClick:r,disabled:c,className:x,children:"Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†"}),e.jsx("button",{type:"button",onClick:l,disabled:c,className:x,children:"Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨"}),e.jsx("button",{type:"button",onClick:n,disabled:c,className:x,children:"Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø§Øª"}),e.jsx("button",{type:"button",onClick:m,disabled:c,className:x,children:"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¯Ø±Ø¬Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"})]})]})}function ma(){return e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-5 w-5","aria-hidden":"true",children:[e.jsx("path",{d:"M12 3a4 4 0 0 0-4 4v2.2c0 .8-.2 1.6-.7 2.3L6 13.4v1.1h12v-1.1l-1.3-1.9a4.2 4.2 0 0 1-.7-2.3V7a4 4 0 0 0-4-4Z",stroke:"currentColor",strokeWidth:"1.4"}),e.jsx("path",{d:"M10 17a2 2 0 0 0 4 0",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function pa(){return e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-5 w-5","aria-hidden":"true",children:[e.jsx("path",{d:"m10.5 3 .4 1.8c.1.4.4.7.8.9.4.1.9.1 1.3 0 .4-.2.7-.5.8-.9L14.2 3m4.3 2.5-1.4 1.2c-.3.3-.5.7-.5 1.1s.2.8.5 1.1c.3.3.7.5 1.1.5h1.8m0 4.2h-1.8c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1s.2.8.5 1.1l1.4 1.2M14.2 21l-.4-1.8c-.1-.4-.4-.7-.8-.9a2 2 0 0 0-1.3 0c-.4.2-.7.5-.8.9L10.5 21m-4.3-2.5 1.4-1.2c.3-.3.5-.7.5-1.1s-.2-.8-.5-1.1c-.3-.3-.7-.5-1.1-.5H4.7m0-4.2h1.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1s-.2-.8-.5-1.1L6.2 5.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"2.4",stroke:"currentColor",strokeWidth:"1.4"})]})}function qe({label:r,children:l,onClick:n}){return e.jsx("button",{type:"button","aria-label":r,onClick:n,className:"ht-interactive inline-flex h-10 w-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-subtle)] bg-[var(--ht-bg-base)] text-[var(--ht-neutral-600)] hover:bg-[var(--ht-bg-subtle)] hover:text-[var(--ht-neutral-800)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:l})}function ba({teacherName:r,avatarUrl:l,subjectLabel:n,onOpenNotifications:m,onOpenSettings:c,onOpenSchedule:x,onLogout:v}){return e.jsxs("header",{className:"ht-surface ht-fade-up mb-10 flex flex-col justify-between gap-4 p-5 sm:flex-row sm:items-center sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:l,alt:`ØµÙˆØ±Ø© ${r}`,className:"h-12 w-12 rounded-full border border-[var(--ht-border-default)] object-cover"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"ht-display text-[30px] font-semibold leading-[1.3] text-[var(--ht-neutral-900)]",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£. ",r]}),e.jsx("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-500)]",children:n})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:x,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx(qe,{label:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",onClick:m,children:e.jsx(ma,{})}),e.jsx(qe,{label:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",onClick:c,children:e.jsx(pa,{})}),e.jsx("button",{type:"button",onClick:v,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] font-medium text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ht-border-focus)] focus-visible:ring-offset-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"})]})]})}const A={dashboard:"dashboard",classes:"classes",snapshots:"snapshots",analysis:"analysis",actions:"actions"},va=[{id:A.dashboard,label:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",icon:e.jsx("svg",{viewBox:"0 0 18 18",fill:"none",width:"15",height:"15",children:e.jsx("path",{d:"M1 9.5V16a1 1 0 001 1h4.5v-4.5h5V17H16a1 1 0 001-1V9.5L9 2 1 9.5z",stroke:"currentColor",strokeWidth:"1.4",strokeLinejoin:"round"})})},{id:A.classes,label:"Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©",icon:e.jsxs("svg",{viewBox:"0 0 18 18",fill:"none",width:"15",height:"15",children:[e.jsx("rect",{x:"1.5",y:"4",width:"15",height:"12",rx:"1.5",stroke:"currentColor",strokeWidth:"1.4"}),e.jsx("path",{d:"M5.5 4V2M12.5 4V2M1.5 8h15",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})},{id:A.snapshots,label:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø§Ø¨",icon:e.jsxs("svg",{viewBox:"0 0 18 18",fill:"none",width:"15",height:"15",children:[e.jsx("circle",{cx:"7",cy:"5.5",r:"2.5",stroke:"currentColor",strokeWidth:"1.4"}),e.jsx("path",{d:"M2 16c0-2.76 2.24-4.5 5-4.5s5 1.74 5 4.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("path",{d:"M12.5 7.5a2.5 2.5 0 010 5M14.5 16c0-1.8-.8-3.2-2-4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})},{id:A.analysis,label:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙ",icon:e.jsxs("svg",{viewBox:"0 0 18 18",fill:"none",width:"15",height:"15",children:[e.jsx("path",{d:"M2 14l3.5-4.5L8 12l4-6 2.5 3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"2",y:"2",width:"14",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.4"})]})},{id:A.actions,label:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©",icon:e.jsxs("svg",{viewBox:"0 0 18 18",fill:"none",width:"15",height:"15",children:[e.jsx("path",{d:"M9 1v3M9 14v3M1 9h3M14 9h3M3.22 3.22l2.12 2.12M12.66 12.66l2.12 2.12M3.22 14.78l2.12-2.12M12.66 5.34l2.12-2.12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("circle",{cx:"9",cy:"9",r:"2.5",stroke:"currentColor",strokeWidth:"1.4"})]})}];function fa({risk:r}){const n={high:{label:"Ø®Ø·Ø±",bg:"#fee2e2",color:"#b91c1c"},medium:{label:"Ù…ØªÙˆØ³Ø·",bg:"#fef3c7",color:"#92400e"},low:{label:"Ù…Ù†Ø®ÙØ¶",bg:"#dcf5e9",color:"#146f3e"}}[r]||{label:r||"â€”",bg:"#f1f5f9",color:"#475569"};return e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 10px",borderRadius:999,fontSize:11,fontWeight:700,background:n.bg,color:n.color,whiteSpace:"nowrap"},children:n.label})}function ce({title:r,subtitle:l}){return e.jsxs("div",{className:"ht-section-heading",children:[e.jsx("h2",{className:"ht-section-title",children:r}),l&&e.jsx("p",{className:"ht-section-subtitle",children:l})]})}function me({label:r,value:l,accent:n="#2a4799",bg:m="#f0f4fd",icon:c}){return e.jsxs("article",{className:"ht-stat-card",style:{"--accent":n,"--bg":m},children:[e.jsx("div",{className:"ht-stat-icon",style:{background:m,color:n},children:c}),e.jsx("p",{className:"ht-stat-value",style:{color:n},children:l}),e.jsx("p",{className:"ht-stat-label",children:r})]})}const Me={title:"",body:"",attachmentName:""},Se={title:"",description:"",dueDate:"",maxMarks:"100",attachmentName:""},Qe={studentId:"",examTitle:"",score:"",maxMarks:"100"},Ye={studentId:"",status:"pending",score:"",teacherComment:""},Ie={examTitle:"",defaultMaxMarks:"100",sourceType:"image",fileName:"",fileDataUrl:"",ocrText:""},Te={tone:"neutral",loading:!1,error:"",feedback:null,termComment:null},Je={pending:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",submitted:"Ù…Ø³Ù„Ù‘Ù…",graded:"Ù…ÙƒØªÙ…Ù„"},ga=r=>new Promise((l,n)=>{const m=new FileReader;m.onload=()=>l(String(m.result||"")),m.onerror=()=>n(new Error("ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù.")),m.readAsDataURL(r)});function ka(){var Ee,Le,$e,Pe,Ge,Oe,Ue,We,Be,He,_e,Ve,ze;const r=Rt(),{token:l,user:n,logout:m}=Et(),[c,x]=i.useState(!0),[v,f]=i.useState(!1),[j,d]=i.useState(""),[y,N]=i.useState(""),[g,pe]=i.useState([]),[X,be]=i.useState([]),[Z,ve]=i.useState([]),[k,fe]=i.useState(""),[E,Ke]=i.useState({pendingResponses:0,flaggedParents:0,repeatedIncidents:0,weeklySnapshots:[],classAnalysis:[]}),[O,Ae]=i.useState(A.dashboard),[b,q]=i.useState(""),[et,Q]=i.useState("posts"),[De,tt]=i.useState(!1),[ae,se]=i.useState({open:!1,mode:"create",post:null}),[L,Y]=i.useState(Me),[re,ne]=i.useState({open:!1,mode:"create",item:null}),[$,U]=i.useState(Se),[at,le]=i.useState({open:!1,row:null}),[R,J]=i.useState(Qe),[P,de]=i.useState({open:!1,item:null}),[w,K]=i.useState(Ye),[u,xe]=i.useState({open:!1,student:null,profile:null,loading:!1,error:""}),[ge,je]=i.useState({open:!1,title:"",kind:""}),[C,W]=i.useState({open:!1,stage:"upload",loading:!1,preview:null,rows:[]}),[M,ee]=i.useState(Ie),[S,D]=i.useState(Te),B=async()=>{var t,a;try{x(!0),d("");const[o,s]=await Promise.all([$t(l),Pt(l)]),I=o.classes||[];pe(I),be(o.homework||[]),ve(o.announcements||[]),fe(((t=o.subjects)==null?void 0:t[0])||((a=n==null?void 0:n.subjects)==null?void 0:a[0])||(n==null?void 0:n.subject)||""),Ke({pendingResponses:Number((s==null?void 0:s.pendingResponses)||0),flaggedParents:Number((s==null?void 0:s.flaggedParents)||0),repeatedIncidents:Number((s==null?void 0:s.repeatedIncidents)||0),weeklySnapshots:Array.isArray(s==null?void 0:s.weeklySnapshots)?s.weeklySnapshots:[],classAnalysis:Array.isArray(s==null?void 0:s.classAnalysis)?s.classAnalysis:[]})}catch(o){d(T(o,"ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù…."))}finally{x(!1)}};i.useEffect(()=>{B()},[l]),i.useEffect(()=>{b&&(g.some(t=>t.name===b)||(q(""),Q("posts")))},[g,b]);const h=i.useMemo(()=>g.find(t=>t.name===b)||null,[g,b]),st=i.useMemo(()=>(n==null?void 0:n.profilePicture)||(n==null?void 0:n.avatarUrl)||Xe(n||{}),[n]),oe=i.useMemo(()=>{const t=Z.map(s=>({id:`ann-${s.id}`,className:s.className,type:"Ø¥Ø¹Ù„Ø§Ù†",title:s.title,date:s.updatedAt||s.createdAt})),a=X.map(s=>({id:`hw-${s.id}`,className:s.className,type:"ÙˆØ§Ø¬Ø¨",title:s.title,date:s.updatedAt||s.createdAt})),o=g.flatMap(s=>(s.students||[]).flatMap(I=>(I.examMarks||[]).map(V=>({id:`grade-${s.name}-${I.id}-${V.subject}`,className:s.name,type:"ØªÙ‚ÙŠÙŠÙ…",title:`${I.name} - ${V.examTitle||V.subject||"ØªÙ‚ÙŠÙŠÙ…"}`,date:V.updatedAt}))));return[...t,...a,...o].filter(s=>s.date).sort((s,I)=>new Date(I.date)-new Date(s.date))},[Z,X,g]),rt=i.useMemo(()=>De?oe:oe.slice(0,8),[oe,De]),Ne=i.useMemo(()=>Z.filter(t=>t.className===b),[Z,b]),_=i.useMemo(()=>X.filter(t=>t.className===b),[X,b]),ye=i.useMemo(()=>((h==null?void 0:h.students)||[]).map(t=>{const a=(t.examMarks||[]).find(o=>String(o.subject||"").toLowerCase()===String(k||"").toLowerCase());return{studentId:t.id,studentName:t.name,examTitle:(a==null?void 0:a.examTitle)||"",score:(a==null?void 0:a.rawScore)==null?(a==null?void 0:a.score)??null:Number(a.rawScore),maxMarks:(a==null?void 0:a.maxMarks)==null?(a==null?void 0:a.score)==null?null:100:Number(a.maxMarks),updatedAt:(a==null?void 0:a.updatedAt)||null}}),[h,k]),nt=i.useMemo(()=>((h==null?void 0:h.students)||[]).map(t=>{const a=_.flatMap(s=>s.assignments.filter(I=>I.studentId===t.id));let o="Ù…Ù†ØªØ¸Ù…";return a.some(s=>s.status==="pending")?o="Ù…ØªØ§Ø¨Ø¹Ø©":a.some(s=>s.status==="submitted")?o="Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…":a.length&&a.every(s=>s.status==="graded")&&(o="Ù…ÙƒØªÙ…Ù„"),{id:t.id,name:t.name,email:t.email||"",avatarUrl:Xe(t),status:o}}),[h,_]),lt=i.useMemo(()=>{var o;const t=ye.filter(s=>s.score!=null),a=t.length?t.reduce((s,I)=>s+Number(I.score||0)/(Number(I.maxMarks||100)||100)*100,0)/t.length:0;return{studentCount:((o=h==null?void 0:h.students)==null?void 0:o.length)||0,homeworkCount:_.length,averageGrade:a,announcementCount:Ne.length}},[h,_,Ne,ye]),ot=i.useMemo(()=>_.flatMap(t=>t.assignments.filter(a=>a.status==="submitted"||a.status==="graded").map(a=>({id:`${t.id}-${a.studentId}`,studentName:a.studentName,homeworkTitle:t.title,status:a.status,updatedAt:a.updatedAt}))).sort((t,a)=>new Date(a.updatedAt)-new Date(t.updatedAt)).slice(0,8),[_]),ie=()=>{d(""),N("")},it=()=>{m(),r("/login",{replace:!0})},ct=()=>je({open:!0,title:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",kind:"notifications"}),dt=()=>je({open:!0,title:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",kind:"settings"}),Fe=()=>{ie(),se({open:!0,mode:"create",post:null}),Y(Me)},xt=t=>{ie(),se({open:!0,mode:"edit",post:t}),Y({title:t.title||"",body:t.body||"",attachmentName:t.attachmentName||""})},ut=async()=>{if(b){if(!L.title.trim()){d("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ø·Ù„ÙˆØ¨.");return}try{f(!0),d(""),ae.mode==="edit"&&ae.post?(await Gt(l,ae.post.id,{title:L.title.trim(),body:L.body.trim(),attachmentName:L.attachmentName.trim()}),N("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†.")):(await Ot(l,{className:b,subject:k,title:L.title.trim(),body:L.body.trim(),attachmentName:L.attachmentName.trim()}),N("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†.")),se({open:!1,mode:"create",post:null}),Y(Me),await B()}catch(t){d(T(t,"ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†."))}finally{f(!1)}}},ht=async t=>{if(window.confirm("Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ"))try{f(!0),d(""),await qt(l,t.id),N("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†."),await B()}catch(a){d(T(a,"ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†."))}finally{f(!1)}},Re=()=>{ie(),ne({open:!0,mode:"create",item:null}),U(Se)},mt=t=>{ie(),ne({open:!0,mode:"edit",item:t}),U({title:t.title||"",description:t.description||"",dueDate:t.dueDate?new Date(t.dueDate).toISOString().slice(0,10):"",maxMarks:String(t.maxMarks||100),attachmentName:t.attachmentName||""})},pt=async()=>{if(!b)return;const t=$.title.trim(),a=Number($.maxMarks);if(!t){d("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ§Ø¬Ø¨ Ù…Ø·Ù„ÙˆØ¨.");return}if(Number.isNaN(a)||a<=0){d("Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©.");return}try{f(!0),d("");const o={title:t,description:$.description.trim(),dueDate:$.dueDate||null,maxMarks:a,attachmentName:$.attachmentName.trim()};re.mode==="edit"&&re.item?(await Ut(l,re.item.id,o),N("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ø¨.")):(await Wt(l,{className:b,subject:k,...o}),N("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨.")),ne({open:!1,mode:"create",item:null}),U(Se),await B()}catch(o){d(T(o,"ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„ÙˆØ§Ø¬Ø¨."))}finally{f(!1)}},bt=async t=>{if(window.confirm("Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙˆØ§Ø¬Ø¨ØŸ"))try{f(!0),d(""),await Zt(l,t.id),N("ØªÙ… Ø­Ø°Ù Ø§Ù„ÙˆØ§Ø¬Ø¨."),await B()}catch(a){d(T(a,"ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙˆØ§Ø¬Ø¨."))}finally{f(!1)}},vt=t=>{var o;const a=(o=t.assignments)==null?void 0:o[0];de({open:!0,item:t}),K({studentId:(a==null?void 0:a.studentId)||"",status:(a==null?void 0:a.status)||"pending",score:(a==null?void 0:a.score)==null?"":String(a.score),teacherComment:(a==null?void 0:a.teacherComment)||""})},F=i.useMemo(()=>{const t=P.item;return!t||!w.studentId?null:t.assignments.find(a=>a.studentId===w.studentId)||null},[P.item,w.studentId]),ft=t=>{var o;const a=(o=P.item)==null?void 0:o.assignments.find(s=>s.studentId===t);a&&K({studentId:t,status:a.status||"pending",score:a.score==null?"":String(a.score),teacherComment:a.teacherComment||""})},gt=async()=>{const t=P.item;if(!t||!w.studentId)return;const a=w.score===""?null:Number(w.score);if(a!==null&&Number.isNaN(a)){d("Ø¯Ø±Ø¬Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.");return}try{f(!0),d(""),await Bt(l,t.id,{studentId:w.studentId,status:w.status,score:a,teacherComment:w.teacherComment}),N("ØªÙ… ØªØ­Ø¯ÙŠØ« ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨."),await B(),de({open:!1,item:null}),K(Ye)}catch(o){d(T(o,"ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨."))}finally{f(!1)}},ke=(t=null)=>{var a,o;ie(),le({open:!0,row:t}),J({studentId:(t==null?void 0:t.studentId)||((o=(a=h==null?void 0:h.students)==null?void 0:a[0])==null?void 0:o.id)||"",examTitle:(t==null?void 0:t.examTitle)||"",score:(t==null?void 0:t.score)==null?"":String(t.score),maxMarks:(t==null?void 0:t.maxMarks)==null?"100":String(t.maxMarks)})},jt=async()=>{if(!R.studentId){d("Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø·Ù„ÙˆØ¨.");return}const t=Number(R.score),a=Number(R.maxMarks);if(Number.isNaN(t)||Number.isNaN(a)||a<=0){d("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±Ø¬Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©.");return}try{f(!0),d(""),await Ht(l,{studentId:R.studentId,subject:k,examTitle:R.examTitle.trim()||"ØªÙ‚ÙŠÙŠÙ…",score:t,maxMarks:a}),N("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø¬Ø©."),le({open:!1,row:null}),J(Qe),await B()}catch(o){d(T(o,"ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø¬Ø©."))}finally{f(!1)}},Nt=async t=>{D(Te),xe({open:!0,student:t,profile:null,loading:!0,error:""});try{const a=await Qt(l,t.id,{subject:k});xe({open:!0,student:t,profile:a,loading:!1,error:""})}catch(a){xe({open:!0,student:t,profile:null,loading:!1,error:T(a,"ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø·Ø§Ù„Ø¨.")})}},ue=(t,a)=>{var s;const o=b||((s=g[0])==null?void 0:s.name)||"";o&&(Ae(A.classes),q(o),Q(t),a==="post"?Fe():a==="homework"?Re():a==="grade"?ke():a==="grade-import"&&we(o))},we=(t="")=>{var o;const a=t||b||((o=g[0])==null?void 0:o.name)||"";if(!a){d("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† ÙØµÙ„ Ù…Ø­Ø¯Ø¯.");return}q(a),ee({...Ie,examTitle:R.examTitle||""}),W({open:!0,stage:"upload",loading:!1,preview:null,rows:[]})},Ce=()=>{W({open:!1,stage:"upload",loading:!1,preview:null,rows:[]}),ee(Ie)},yt=async t=>{var o;const a=(o=t.target.files)==null?void 0:o[0];if(a)try{const s=await ga(a);ee(I=>{var V;return{...I,fileName:a.name||"",fileDataUrl:s,sourceType:(V=a.type)!=null&&V.includes("pdf")?"pdf":"image"}})}catch(s){d(T(s,"ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù."))}},kt=async()=>{if(!b){d("Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØµÙ„ Ù…Ø·Ù„ÙˆØ¨.");return}if(!M.fileDataUrl&&!M.ocrText.trim()){d("Ø§Ø±ÙØ¹ ØµÙˆØ±Ø©/Ù…Ù„Ù Ø£Ùˆ Ø£Ø¶Ù Ù†Øµ OCR Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„.");return}try{W(a=>({...a,loading:!0})),d("");const t=await _t(l,{className:b,subject:k,examTitle:M.examTitle.trim()||R.examTitle.trim()||"Assessment",defaultMaxMarks:Number(M.defaultMaxMarks||100),sourceType:M.sourceType,fileDataUrl:M.fileDataUrl,ocrText:M.ocrText.trim()});W(a=>({...a,loading:!1,stage:"preview",preview:t,rows:((t==null?void 0:t.detectedRows)||[]).map(o=>({...o,skip:!!o.skip,confirmOverwrite:!!o.confirmOverwrite,examTitle:o.examTitle||M.examTitle.trim()||"Assessment"}))}))}catch(t){W(a=>({...a,loading:!1})),d(T(t,"ØªØ¹Ø°Ø± ØªØ­Ù„ÙŠÙ„ ÙƒØ´Ù Ø§Ù„Ø¯Ø±Ø¬Ø§Øª."))}},te=(t,a)=>W(o=>({...o,rows:o.rows.map(s=>s.rowIndex===t?{...s,...a}:s)})),wt=async()=>{if(!C.rows.length){d("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯.");return}try{W(a=>({...a,loading:!0})),d("");const t=await Vt(l,{className:b,subject:k,examTitle:M.examTitle.trim()||"Assessment",confirmImport:!0,rows:C.rows.map(a=>({rowIndex:a.rowIndex,sourceStudentName:a.sourceStudentName,matchedStudentId:a.matchedStudentId||"",score:a.score,maxMarks:a.maxMarks,examTitle:a.examTitle,skip:a.skip===!0,confirmOverwrite:a.confirmOverwrite===!0}))});N(`ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯: ${p(t.importedCount)} Ø³Ø¬Ù„ØŒ ØªÙ… Ø§Ù„ØªØ¬Ø§ÙˆØ²: ${p(t.skippedCount)}.`),Ce(),await B()}catch(t){W(a=>({...a,loading:!1})),d(T(t,"ØªØ¹Ø°Ø± ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯."))}},Ct=async()=>{if(u.student)try{D(a=>({...a,loading:!0,error:""}));const t=await zt(l,u.student.id,{subject:k,tone:S.tone});D(a=>({...a,loading:!1,feedback:(t==null?void 0:t.draft)||null}))}catch(t){D(a=>({...a,loading:!1,error:T(t,"ØªØ¹Ø°Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø³ÙˆØ¯Ø© Ø§Ù„Ø°ÙƒÙŠØ©.")}))}},Mt=async()=>{if(u.student)try{D(a=>({...a,loading:!0,error:""}));const t=await Xt(l,u.student.id,{subject:k,tone:S.tone,termLabel:"Current Term"});D(a=>({...a,loading:!1,termComment:(t==null?void 0:t.comment)||null}))}catch(t){D(a=>({...a,loading:!1,error:T(t,"ØªØ¹Ø°Ø± ØªÙˆÙ„ÙŠØ¯ ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„ØªÙ‚Ø±ÙŠØ±.")}))}},St=t=>{t!==A.classes&&(q(""),Q("posts")),Ae(t),window.scrollTo({top:0,behavior:"smooth"})},It=()=>e.jsxs("div",{className:"ht-page-body",children:[e.jsx(ce,{title:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",subtitle:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© ÙÙˆØ±ÙŠØ© Ø¹Ù„Ù‰ Ù†Ø´Ø§Ø· Ø§Ù„ÙØµÙˆÙ„"}),e.jsxs("div",{className:"ht-stats-row",children:[e.jsx(me,{label:"Ø±Ø¯ÙˆØ¯ Ù…Ø¹Ù„Ù‘Ù‚Ø©",value:p(E.pendingResponses),accent:"#2a4799",bg:"#f0f4fd",icon:"ðŸ“¨"}),e.jsx(me,{label:"Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø£Ù…ÙˆØ± Ø¨Ø­Ø§Ø¬Ø© Ù…ØªØ§Ø¨Ø¹Ø©",value:p(E.flaggedParents),accent:"#92400e",bg:"#fef3c7",icon:"âš‘"}),e.jsx(me,{label:"Ø­ÙˆØ§Ø¯Ø« Ù…ØªÙƒØ±Ø±Ø©",value:p(E.repeatedIncidents),accent:"#b91c1c",bg:"#fee2e2",icon:"âš "}),e.jsx(me,{label:"Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ù…ÙØ³Ù†Ø¯Ø©",value:p(g.length),accent:"#146f3e",bg:"#dcf5e9",icon:"ðŸ«"})]}),e.jsx(aa,{items:rt,onViewAll:()=>tt(t=>!t)})]}),Tt=()=>h?e.jsxs("div",{className:"ht-page-body",children:[e.jsxs("button",{type:"button",onClick:()=>{q(""),Q("posts")},className:"ht-back-btn ht-interactive",children:[e.jsx("svg",{viewBox:"0 0 16 16",fill:"none",width:"14",height:"14",children:e.jsx("path",{d:"M10 12l-4-4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),"Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙØµÙˆÙ„"]}),e.jsx(ua,{className:h.name,studentCount:h.students.length,activeTab:et,onChangeTab:Q,posts:Ne,homework:_,grades:ye,students:nt,summary:lt,recentSubmissions:ot,onCreatePost:Fe,onEditPost:xt,onDeletePost:ht,onCreateHomework:Re,onEditHomework:mt,onDeleteHomework:bt,onOpenHomeworkDetail:vt,onAddGrade:()=>ke(),onImportGrade:()=>we(h.name),onEditGrade:t=>ke(t),onViewStudent:t=>Nt(t)})]}):e.jsxs("div",{className:"ht-page-body",children:[e.jsx(ce,{title:"Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©",subtitle:g.length?`${p(g.length)} ÙØµÙ„ Ù…ÙØ³Ù†ÙŽØ¯ Ø¥Ù„ÙŠÙƒ â€” Ø§Ø®ØªØ± ÙØµÙ„Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡`:"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØµÙˆÙ„ Ù…ÙØ³Ù†Ø¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"}),g.length?e.jsx("div",{className:"ht-class-grid",children:g.map(t=>e.jsx(sa,{className:t.name,studentCount:t.students.length,onClick:()=>{q(t.name),Q("posts")}},t.name))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØµÙˆÙ„ Ù…ÙØ³Ù†Ø¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]}),At=()=>{var t;return e.jsxs("div",{className:"ht-page-body",children:[e.jsx(ce,{title:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø§Ø¨",subtitle:`Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ â€” ${p(((t=E.weeklySnapshots)==null?void 0:t.length)||0)} Ø·Ø§Ù„Ø¨`}),(E.weeklySnapshots||[]).length?e.jsx("div",{className:"ht-snapshot-grid",children:E.weeklySnapshots.map(a=>e.jsxs("article",{className:"ht-surface ht-snapshot-card",children:[e.jsxs("div",{className:"ht-snap-top",children:[e.jsx("div",{className:"ht-snap-avatar",children:(a.studentName||"ØŸ")[0]}),e.jsxs("div",{className:"ht-snap-info",children:[e.jsx("p",{className:"ht-snap-name",children:a.studentName}),e.jsx("p",{className:"ht-snap-class",children:a.className||"â€”"})]}),e.jsx(fa,{risk:a.riskStatus})]}),e.jsx("div",{className:"ht-snap-divider"}),e.jsxs("dl",{className:"ht-snap-dl",children:[a.academicDirection&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:"Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ"}),e.jsx("dd",{children:a.academicDirection})]}),a.attendancePattern&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:"Ø§Ù„Ø­Ø¶ÙˆØ±"}),e.jsx("dd",{children:a.attendancePattern})]}),a.behaviorNote&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:"Ø§Ù„Ø³Ù„ÙˆÙƒ"}),e.jsx("dd",{children:a.behaviorNote})]}),a.parentEngagementStatus&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:"ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("dd",{children:a.parentEngagementStatus})]})]})]},`${a.studentId}-${a.className}`))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ."})]})},Dt=()=>e.jsxs("div",{className:"ht-page-body",children:[e.jsx(ce,{title:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙ Ø§Ù„Ø°ÙƒÙŠ",subtitle:"ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØµÙˆÙ„"}),(E.classAnalysis||[]).length?e.jsx("div",{className:"ht-analysis-list",children:E.classAnalysis.map((t,a)=>e.jsxs("article",{className:"ht-surface ht-analysis-card",children:[e.jsx("div",{className:"ht-analysis-bar"}),e.jsxs("div",{className:"ht-analysis-content",children:[e.jsxs("div",{className:"ht-analysis-tags",children:[t.className&&e.jsx("span",{className:"ht-tag ht-tag-class",children:t.className}),t.type&&e.jsx("span",{className:"ht-tag ht-tag-type",children:t.type})]}),e.jsx("p",{className:"ht-analysis-message",children:t.message}),t.suggestion&&e.jsxs("div",{className:"ht-analysis-suggestion",children:[e.jsx("span",{children:"ðŸ’¡"}),e.jsx("p",{children:t.suggestion})]})]})]},`${t.type}-${t.className}-${a}`))}):e.jsx(G,{message:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ØªØ­Ù„ÙŠÙ„ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹."})]}),Ft=()=>e.jsxs("div",{className:"ht-page-body",children:[e.jsx(ce,{title:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©",subtitle:"Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙÙŠ Ø§Ù„ÙØµÙˆÙ„"}),e.jsx(ha,{onPost:()=>ue("posts","post"),onHomework:()=>ue("homework","homework"),onGrade:()=>ue("grades","grade"),onGradeImport:()=>ue("grades","grade-import"),disabled:!g.length})]});return e.jsxs("main",{dir:"rtl",className:"ht-theme ht-app-root",children:[e.jsxs("div",{className:"ht-app-container",children:[e.jsx(ba,{teacherName:(n==null?void 0:n.name)||"",avatarUrl:st,subjectLabel:k?`Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ÙƒÙ„Ù Ø¨Ù‡Ø§: ${k}`:"Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ÙƒÙ„Ù Ø¨Ù‡Ø§",onOpenNotifications:ct,onOpenSettings:dt,onOpenSchedule:()=>r("/teacher/schedule"),onLogout:it}),e.jsx("nav",{className:"ht-page-nav",role:"tablist","aria-label":"ØµÙØ­Ø§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©",children:va.map(({id:t,label:a,icon:o})=>e.jsxs("button",{type:"button",role:"tab","aria-selected":O===t,onClick:()=>St(t),className:`ht-nav-btn ht-interactive${O===t?" active":""}`,children:[e.jsx("span",{className:"ht-nav-btn-icon",children:o}),e.jsx("span",{className:"ht-nav-btn-label",children:a}),O===t&&e.jsx("span",{className:"ht-nav-btn-indicator","aria-hidden":"true"})]},t))}),j&&e.jsx("div",{className:"ht-banner ht-banner-error",children:j}),y&&e.jsx("div",{className:"ht-banner ht-banner-success",children:y}),c?e.jsx("div",{className:"ht-loading-wrap",children:e.jsx("div",{className:"ht-loading-grid",children:[200,140,300,180,260,100].map((t,a)=>e.jsx("div",{className:"ht-loading-bone",style:{height:t}},a))})}):e.jsxs("div",{className:"ht-page-enter",children:[O===A.dashboard&&It(),O===A.classes&&Tt(),O===A.snapshots&&At(),O===A.analysis&&Dt(),O===A.actions&&Ft()]})]}),e.jsx(z,{open:ae.open,onClose:()=>se({open:!1,mode:"create",post:null}),title:ae.mode==="edit"?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†":"Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†",description:"Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ÙˆØªÙØ§ØµÙŠÙ„Ù‡ Ù„Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ.",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>se({open:!1,mode:"create",post:null}),className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98]",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"button",disabled:v,onClick:ut,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:v?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{type:"text",value:L.title,onChange:t=>Y(a=>({...a,title:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}),e.jsx("textarea",{value:L.body,onChange:t=>Y(a=>({...a,body:t.target.value})),className:"min-h-[120px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[14px] leading-[1.8] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ù…Ø±ÙÙ‚"}),e.jsx("input",{type:"text",value:L.attachmentName,onChange:t=>Y(a=>({...a,attachmentName:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]})]})}),e.jsx(z,{open:re.open,onClose:()=>ne({open:!1,mode:"create",item:null}),title:re.mode==="edit"?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨":"Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨",description:"Ø¥Ø¯Ø§Ø±Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨ Ù„Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ.",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>ne({open:!1,mode:"create",item:null}),className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98]",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"button",disabled:v,onClick:pt,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:v?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"})]}),children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"block sm:col-span-2",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ§Ø¬Ø¨"}),e.jsx("input",{type:"text",value:$.title,onChange:t=>U(a=>({...a,title:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ù„ÙŠÙ…"}),e.jsx("input",{type:"date",value:$.dueDate,onChange:t=>U(a=>({...a,dueDate:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ù…Ù†"}),e.jsx("input",{type:"number",min:"1",value:$.maxMarks,onChange:t=>U(a=>({...a,maxMarks:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block sm:col-span-2",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:$.description,onChange:t=>U(a=>({...a,description:t.target.value})),className:"min-h-[100px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[14px] leading-[1.8] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block sm:col-span-2",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ù…Ø±ÙÙ‚"}),e.jsx("input",{type:"text",value:$.attachmentName,onChange:t=>U(a=>({...a,attachmentName:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]})]})}),e.jsx(z,{open:at.open,onClose:()=>le({open:!1,row:null}),title:"Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø§Øª",description:"Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨.",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:v,onClick:()=>{le({open:!1,row:null}),we(b)},className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98] disabled:opacity-60",children:"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"}),e.jsx("button",{type:"button",onClick:()=>le({open:!1,row:null}),className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98]",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"button",disabled:v,onClick:jt,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:v?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsxs("select",{value:R.studentId,onChange:t=>J(a=>({...a,studentId:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø·Ø§Ù„Ø¨"}),((h==null?void 0:h.students)||[]).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx("input",{type:"text",value:R.examTitle,onChange:t=>J(a=>({...a,examTitle:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø¯Ø±Ø¬Ø©"}),e.jsx("input",{type:"number",min:"0",value:R.score,onChange:t=>J(a=>({...a,score:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ù…Ù†"}),e.jsx("input",{type:"number",min:"1",value:R.maxMarks,onChange:t=>J(a=>({...a,maxMarks:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]})]})]})}),e.jsx(z,{open:C.open,onClose:Ce,title:"Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙƒØ´Ù Ø¯Ø±Ø¬Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",description:"Ø±ÙØ¹ ØµÙˆØ±Ø© Ø£Ùˆ PDF Ø£Ùˆ Ù†Øµ OCRØŒ Ø«Ù… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙŠØ¯ÙˆÙŠØ§Ù‹.",size:"xl",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:Ce,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98]",children:"Ø¥Ù„ØºØ§Ø¡"}),C.stage==="upload"?e.jsx("button",{type:"button",disabled:C.loading,onClick:kt,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:C.loading?"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„...":"ØªØ­Ù„ÙŠÙ„"}):e.jsx("button",{type:"button",disabled:C.loading,onClick:wt,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:C.loading?"Ø¬Ø§Ø±Ù Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯"})]}),children:C.stage==="upload"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-[13px] text-[var(--ht-neutral-500)]",children:["Ø§Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ: ",b||"-"," Â· Ø§Ù„Ù…Ø§Ø¯Ø©: ",k||"-"]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ù…Ù„Ù ÙƒØ´Ù Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"}),e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:yt,className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[13px] text-[var(--ht-neutral-700)]"}),M.fileName&&e.jsx("p",{className:"mt-1 text-[12px] text-[var(--ht-neutral-500)]",children:M.fileName})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"}),e.jsx("input",{type:"text",value:M.examTitle,onChange:t=>ee(a=>({...a,examTitle:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"}),e.jsx("input",{type:"number",min:"1",value:M.defaultMaxMarks,onChange:t=>ee(a=>({...a,defaultMaxMarks:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ù†Øµ OCR (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("textarea",{value:M.ocrText,onChange:t=>ee(a=>({...a,ocrText:t.target.value})),className:"min-h-[120px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[13px] text-[var(--ht-neutral-800)] outline-none",placeholder:"Ø§Ù„ØµÙ‚ Ù†Øµ OCR Ù‡Ù†Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªÙˆÙØ±Ø§Ù‹."})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-3 sm:grid-cols-4",children:[["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØµÙÙˆÙ",(Le=(Ee=C.preview)==null?void 0:Ee.summary)==null?void 0:Le.totalRows],["Ù…Ø·Ø§Ø¨Ù‚Ø§Øª Ù†Ø§Ø¬Ø­Ø©",(Pe=($e=C.preview)==null?void 0:$e.summary)==null?void 0:Pe.matchedRows],["Ø£Ø³Ù…Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©",(Oe=(Ge=C.preview)==null?void 0:Ge.summary)==null?void 0:Oe.unrecognizedRows],["ØµÙÙˆÙ ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©",(We=(Ue=C.preview)==null?void 0:Ue.summary)==null?void 0:We.inconsistentRows]].map(([t,a])=>e.jsxs("article",{className:"ht-soft-surface p-3",children:[e.jsx("p",{className:"text-[11px] text-[var(--ht-neutral-500)]",children:t}),e.jsx("p",{className:"mt-1 text-[18px] font-semibold text-[var(--ht-neutral-900)]",children:p(a||0)})]},t))}),e.jsx("div",{className:"max-h-[420px] overflow-auto rounded-[4px] border border-[var(--ht-border-subtle)]",children:e.jsxs("table",{className:"min-w-full border-collapse text-right",children:[e.jsx("thead",{className:"bg-[var(--ht-bg-subtle)]",children:e.jsx("tr",{children:["Ø§Ù„Ø§Ø³Ù… Ù…Ù† Ø§Ù„ÙƒØ´Ù","Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨","Ø§Ù„Ø¯Ø±Ø¬Ø©","Ù…Ù†","Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±","Ù…Ù„Ø§Ø­Ø¸Ø§Øª","ØªØ¬Ø§ÙˆØ²"].map(t=>e.jsx("th",{className:"whitespace-nowrap px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.06em] text-[var(--ht-neutral-500)]",children:t},t))})}),e.jsx("tbody",{children:C.rows.map(t=>{var a,o;return e.jsxs("tr",{className:"border-t border-[var(--ht-border-subtle)]",children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-[13px] text-[var(--ht-neutral-800)]",children:t.sourceStudentName||`Row ${t.rowIndex+1}`}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:t.matchedStudentId||"",onChange:s=>te(t.rowIndex,{matchedStudentId:s.target.value}),className:"h-9 w-[210px] rounded-[4px] border border-[var(--ht-border-default)] px-2 text-[12px] text-[var(--ht-neutral-800)] outline-none",children:[e.jsx("option",{value:"",children:"Unrecognized"}),((h==null?void 0:h.students)||[]).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:t.score??"",onChange:s=>te(t.rowIndex,{score:s.target.value}),className:"h-9 w-20 rounded-[4px] border border-[var(--ht-border-default)] px-2 text-[12px] outline-none"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:t.maxMarks??"",onChange:s=>te(t.rowIndex,{maxMarks:s.target.value}),className:"h-9 w-20 rounded-[4px] border border-[var(--ht-border-default)] px-2 text-[12px] outline-none"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.examTitle||"",onChange:s=>te(t.rowIndex,{examTitle:s.target.value}),className:"h-9 w-28 rounded-[4px] border border-[var(--ht-border-default)] px-2 text-[12px] outline-none"})}),e.jsxs("td",{className:"px-3 py-2 text-[11px] text-[var(--ht-neutral-500)]",children:[(a=t.issues)!=null&&a.length?t.issues.join(" / "):"-",(o=t.overwrite)!=null&&o.requiresOverwriteConfirmation?e.jsxs("label",{className:"mt-1 flex items-center gap-1 text-[11px] text-[var(--ht-danger-600)]",children:[e.jsx("input",{type:"checkbox",checked:t.confirmOverwrite===!0,onChange:s=>te(t.rowIndex,{confirmOverwrite:s.target.checked})}),e.jsx("span",{children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„"})]}):null]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:t.skip===!0,onChange:s=>te(t.rowIndex,{skip:s.target.checked})})})]},t.rowIndex)})})]})})]})}),e.jsx(z,{open:P.open,onClose:()=>de({open:!1,item:null}),title:((Be=P.item)==null?void 0:Be.title)||"ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨",description:"Ù…ØªØ§Ø¨Ø¹Ø© ØªØ³Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©.",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>de({open:!1,item:null}),className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-4 text-[13px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] active:scale-[0.98]",children:"Ø¥ØºÙ„Ø§Ù‚"}),e.jsx("button",{type:"button",disabled:v||!w.studentId,onClick:gt,className:"ht-interactive inline-flex h-10 items-center justify-center rounded-[4px] border border-[var(--ht-primary-600)] bg-[var(--ht-primary-600)] px-4 text-[13px] text-white hover:bg-[var(--ht-primary-700)] active:scale-[0.98] disabled:opacity-60",children:v?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"})]}),children:P.item?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-[13px] text-[var(--ht-neutral-500)]",children:["Ø§Ù„ØªØ³Ù„ÙŠÙ…: ",ea(P.item.dueDate)]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("select",{value:w.studentId,onChange:t=>ft(t.target.value),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]",children:(P.item.assignments||[]).map(t=>e.jsx("option",{value:t.studentId,children:t.studentName},t.studentId))})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsxs("select",{value:w.status,onChange:t=>K(a=>({...a,status:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]",children:[e.jsx("option",{value:"pending",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"}),e.jsx("option",{value:"submitted",children:"Ù…Ø³Ù„Ù‘Ù…"}),e.jsx("option",{value:"graded",children:"Ù…ÙƒØªÙ…Ù„"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø§Ù„Ø¯Ø±Ø¬Ø©"}),e.jsx("input",{type:"number",min:"0",max:P.item.maxMarks,value:w.score,onChange:t=>K(a=>({...a,score:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-2 block text-[13px] text-[var(--ht-neutral-600)]",children:"Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚"}),e.jsx("input",{type:"text",value:w.teacherComment,onChange:t=>K(a=>({...a,teacherComment:t.target.value})),className:"h-10 w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[14px] text-[var(--ht-neutral-800)] outline-none focus:border-[var(--ht-border-focus)]"})]})]}),e.jsxs("div",{className:"ht-soft-surface p-4",children:[e.jsxs("p",{className:"text-[13px] text-[var(--ht-neutral-600)]",children:["Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ",Je[F==null?void 0:F.status]||"-"]}),e.jsxs("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-600)]",children:["Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ",H(F==null?void 0:F.updatedAt)]}),e.jsxs("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-600)]",children:["Ø¹Ø±Ø¶ Ø§Ù„ØªØ³Ù„ÙŠÙ…: ",(F==null?void 0:F.submissionAttachment)||(F==null?void 0:F.submissionText)||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ù„ÙŠÙ…"]})]})]}):null}),e.jsx(z,{open:u.open,onClose:()=>{xe({open:!1,student:null,profile:null,loading:!1,error:""}),D(Te)},title:u.student?`Ù…Ù„Ù Ø§Ù„Ø·Ø§Ù„Ø¨: ${u.student.name}`:"Ù…Ù„Ù Ø§Ù„Ø·Ø§Ù„Ø¨",description:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.",size:"lg",children:u.loading?e.jsx("p",{className:"text-[14px] text-[var(--ht-neutral-500)]",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø·Ø§Ù„Ø¨..."}):u.error?e.jsx("p",{className:"text-[14px] text-[var(--ht-danger-600)]",children:u.error}):u.profile?e.jsxs("div",{className:"space-y-5",children:[e.jsx("section",{className:"grid gap-3 sm:grid-cols-2",children:[["Ø§Ù„Ø§Ø³Ù…",u.profile.student.name],["Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",u.profile.student.email||"-"],["Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø§Øª",(()=>{const t=u.profile.examMarks||[];if(!t.length)return"0%";const a=t.reduce((o,s)=>o+Number(s.rawScore??s.score??0)/(Number(s.maxMarks||100)||100)*100,0)/t.length;return`${p(a,1)}%`})()],["Ø¢Ø®Ø± Ù…Ù„Ø§Ø­Ø¸Ø©",((_e=(He=u.profile.feedbackReceived)==null?void 0:He[0])==null?void 0:_e.content)||"-"]].map(([t,a])=>e.jsxs("div",{className:"ht-soft-surface p-4",children:[e.jsx("p",{className:"text-[12px] text-[var(--ht-neutral-500)]",children:t}),e.jsx("p",{className:"mt-1 text-[16px] font-semibold text-[var(--ht-neutral-900)]",children:a})]},t))}),u.profile.weeklySnapshot&&e.jsxs("section",{className:"ht-soft-surface p-4",children:[e.jsx("h4",{className:"text-[15px] font-semibold text-[var(--ht-neutral-900)]",children:"AI Weekly Snapshot"}),e.jsxs("p",{className:"mt-2 text-[13px] text-[var(--ht-neutral-600)]",children:[u.profile.weeklySnapshot.academicDirection," Â· ",u.profile.weeklySnapshot.riskStatus," risk"]}),e.jsx("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-600)]",children:u.profile.weeklySnapshot.attendancePattern}),e.jsx("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-600)]",children:u.profile.weeklySnapshot.behaviorNote}),e.jsxs("p",{className:"mt-1 text-[13px] text-[var(--ht-neutral-600)]",children:["Parent engagement: ",u.profile.weeklySnapshot.parentEngagementStatus]})]}),e.jsxs("section",{className:"ht-soft-surface space-y-3 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("h4",{className:"text-[15px] font-semibold text-[var(--ht-neutral-900)]",children:"AI Feedback Assistant"}),e.jsxs("select",{value:S.tone,onChange:t=>D(a=>({...a,tone:t.target.value})),className:"h-9 rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[13px] text-[var(--ht-neutral-700)] outline-none",children:[e.jsx("option",{value:"neutral",children:"Neutral"}),e.jsx("option",{value:"encouraging",children:"Encouraging"}),e.jsx("option",{value:"firm",children:"Firm"})]}),e.jsx("button",{type:"button",disabled:S.loading,onClick:Ct,className:"ht-interactive inline-flex h-9 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] disabled:opacity-60",children:S.loading?"Ø¬Ø§Ø±Ù Ø§Ù„ØªÙˆÙ„ÙŠØ¯...":"ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ø®Øµ Ù„Ù„Ù…Ø¹Ù„Ù…/ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("button",{type:"button",disabled:S.loading,onClick:Mt,className:"ht-interactive inline-flex h-9 items-center justify-center rounded-[4px] border border-[var(--ht-border-default)] px-3 text-[12px] text-[var(--ht-neutral-700)] hover:bg-[var(--ht-bg-subtle)] disabled:opacity-60",children:S.loading?"Ø¬Ø§Ø±Ù Ø§Ù„ØªÙˆÙ„ÙŠØ¯...":"ØªÙˆÙ„ÙŠØ¯ ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})]}),S.error&&e.jsx("p",{className:"text-[12px] text-[var(--ht-danger-600)]",children:S.error}),S.feedback&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-[12px] text-[var(--ht-neutral-500)]",children:"Teacher Internal Summary"}),e.jsx("textarea",{value:S.feedback.teacherInternalSummary||"",onChange:t=>D(a=>({...a,feedback:{...a.feedback,teacherInternalSummary:t.target.value}})),className:"min-h-[84px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[13px] text-[var(--ht-neutral-800)] outline-none"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-[12px] text-[var(--ht-neutral-500)]",children:"Parent Summary"}),e.jsx("textarea",{value:S.feedback.parentSummary||"",onChange:t=>D(a=>({...a,feedback:{...a.feedback,parentSummary:t.target.value}})),className:"min-h-[84px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[13px] text-[var(--ht-neutral-800)] outline-none"})]})]}),S.termComment&&e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:[["Academic Comment","academicComment"],["Behavior Reflection","behaviorReflection"],["Attendance Note","attendanceNote"],["Improvement Recommendation","improvementRecommendation"]].map(([t,a])=>e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-[12px] text-[var(--ht-neutral-500)]",children:t}),e.jsx("textarea",{value:S.termComment[a]||"",onChange:o=>D(s=>({...s,termComment:{...s.termComment,[a]:o.target.value}})),className:"min-h-[84px] w-full rounded-[4px] border border-[var(--ht-border-default)] px-3 py-2 text-[13px] text-[var(--ht-neutral-800)] outline-none"})]},a))})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"mb-3 text-[16px] font-semibold text-[var(--ht-neutral-900)]",children:"Ø£Ø­Ø¯Ø« Ø§Ù„ØªØ³Ù„ÙŠÙ…Ø§Øª"}),e.jsxs("div",{className:"space-y-2",children:[(u.profile.homework||[]).slice(0,5).map(t=>e.jsxs("article",{className:"rounded-[4px] border border-[var(--ht-border-subtle)] p-3",children:[e.jsx("p",{className:"text-[14px] font-medium text-[var(--ht-neutral-800)]",children:t.title}),e.jsxs("p",{className:"mt-1 text-[12px] text-[var(--ht-neutral-500)]",children:["Ø§Ù„Ø­Ø§Ù„Ø©: ",Je[t.status]||t.status," Â· Ø§Ù„ØªØ§Ø±ÙŠØ®: ",H(t.assignmentUpdatedAt)]})]},t.id)),!((Ve=u.profile.homework)!=null&&Ve.length)&&e.jsx("p",{className:"text-[13px] text-[var(--ht-neutral-500)]",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"mb-3 text-[16px] font-semibold text-[var(--ht-neutral-900)]",children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"}),e.jsxs("div",{className:"space-y-2",children:[(u.profile.examMarks||[]).slice(0,5).map(t=>e.jsxs("article",{className:"rounded-[4px] border border-[var(--ht-border-subtle)] p-3",children:[e.jsx("p",{className:"text-[14px] font-medium text-[var(--ht-neutral-800)]",children:t.examTitle||t.subject}),e.jsxs("p",{className:"mt-1 text-[12px] text-[var(--ht-neutral-500)]",children:[p(t.rawScore??t.score,2)," / ",p(t.maxMarks||100,2)]})]},`${t.subject}-${t.updatedAt}`)),!((ze=u.profile.examMarks)!=null&&ze.length)&&e.jsx("p",{className:"text-[13px] text-[var(--ht-neutral-500)]",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})]}):e.jsx("p",{className:"text-[14px] text-[var(--ht-neutral-500)]",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})}),e.jsx(z,{open:ge.open,onClose:()=>je({open:!1,title:"",kind:""}),title:ge.title,children:ge.kind==="notifications"?e.jsxs("div",{className:"space-y-2",children:[oe.slice(0,8).map(t=>e.jsxs("article",{className:"rounded-[4px] border border-[var(--ht-border-subtle)] p-3",children:[e.jsx("p",{className:"text-[14px] font-medium text-[var(--ht-neutral-800)]",children:t.title}),e.jsxs("p",{className:"mt-1 text-[12px] text-[var(--ht-neutral-500)]",children:[t.type," Â· ",t.className," Â· ",H(t.date)]})]},t.id)),!oe.length&&e.jsx("p",{className:"text-[14px] text-[var(--ht-neutral-500)]",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):e.jsx("p",{className:"text-[14px] leading-[1.9] text-[var(--ht-neutral-600)]",children:"Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø¹Ù„Ù… ØªØ¹Ø¯ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…. Ù‡Ø°Ù‡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù…Ø®ØµØµØ© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©."})})]})}export{ka as default};
